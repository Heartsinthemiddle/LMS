<!-- templates/course.html -->
<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>SCORM Course</title>
    <style>
        #messagePanel {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        .i-frame {
            width: 100%;
            height: 600px;
            border: none;
        }
    </style>
</head>
<body>
<div>
<div class="i-frame">
    <iframe id="scormFrame" width="100%" height="600"></iframe>
</div>

<script>
    window.onload = function () {
      document.getElementById("scormFrame").src =
        "https://cloud.scorm.com/api/cloud/registration/launch/14b17ae1-e1bc-4c1e-af23-e38745898bd1";
    };
</script>

<div id="messagePanel">
    <label for="messageSelect">Send a message to Dad:</label>
    <select id="messageSelect">
        <option value="I learned something new!">I learned something new!</option>
        <option value="I need help!">I need help!</option>
        <option value="I'm enjoying this!">I'm enjoying this!</option>
    </select>
    <button id="sendMessageBtn">Send SMS</button>
</div>

<script>
    document.getElementById("sendMessageBtn").addEventListener("click", () => {
        const selectedMessage = document.getElementById("messageSelect").value;

        fetch("/api/v1/video-message", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
                learnerId: "child123",    // Replace with dynamic learner ID if available
                courseId: "course1",      // Replace with dynamic course ID
                videoId: "video1",        // Optional: video identifier
                message: selectedMessage
            })
        })
        .then(res => {
            if (res.ok) alert("SMS sent to Dad!");
            else alert("Failed to send SMS.");
        })
        .catch(err => {
            console.error(err);
            alert("Error sending SMS.");
        });
    });
</script>
</div>
</body>
</html>
